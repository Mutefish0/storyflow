<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <title>Hello World!</title>
    <style>
        html,
        body {
            padding: 0;
            font-family: "PingFang SC", "Microsoft YaHei", Menlo;
        }
        .recompile-wrapper {
            padding: 12px;
            text-align: right;
        }
    </style>
    <link href="../../node_modules/mocha/mocha.css" rel="stylesheet">
</head>

<body>
    <div id="mocha"></div>
    <hr>
    <div class="recompile-wrapper"><button id="recompile">重新编译</button></div>
    <script src="../../node_modules/mocha/mocha.js"></script>
    <script src="../../node_modules/should/should.js"></script>
    <script>mocha.setup({ ui: 'bdd' })</script>
    <script src="../../dist/test.js"></script>
    <script>mocha.run()</script>
    <script>
        const btnRecompile = document.getElementById('recompile')
        const remote = require('electron').remote
        btnRecompile.addEventListener('click', () => {
            remote.process.stdout.write('recompile')
        })
        remote.process.stdout.on('data', data => {
            if (data == 'reload') {
                window.reload()
            }
        })
    </script>
</body>

</html>